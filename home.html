<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DEMO AJAXT</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js"></script>
</head>
<body>
<div id="display"></div>

<!--    <label>id</label> <input id="id" name="id ">-->
<label>name</label> <input id="name" name="name ">
<label>age</label> <input id="age" name="age ">
<label>score</label> <input id="score" name="score ">
<button onclick="save()">Save</button>
<br>
<label>id</label> <input type="hidden" id="id" name="id " >
<label>name</label> <input id="name1" name="name ">
<label>age</label> <input id="age1" name="age ">
<label>score</label> <input id="score1" name="score ">
<button onclick="update()">Update</button>


<script>
    let API_URL = 'http://localhost:3000/houses';
    load();

    function load() {
        axios.get(API_URL).then((res) => {
            let str = '';
            let data = res.data;
            data.map(item => {
                str += `<h1>${item.name}+<button onclick="deletes (${item.id})">Delete</button>+<button onclick="edit (${item.id})">Edit</button></h1>`
            })
            document.getElementById('display').innerHTML = str
        })
    }

    function save() {
        let data = {
            name: document.getElementById('name').value,
            age: document.getElementById('age').value,
            score: document.getElementById('score').value
        }

        axios.post(API_URL, data).then((res) => {
            load()
        })
    }

    function deletes(id) {
        axios.delete(API_URL + `/${id}`).then((res) => {
            load()
        })
    }

    function edit(id) {
        axios.get(`http://localhost:3000/houses/search?id=${id}`).then((res) => {
            let data = res.data;
            data.map(data => {
                document.getElementById('id').value = data.id;
                document.getElementById('name1').value = data.name
                document.getElementById('age1').value = data.age
                document.getElementById('score1').value = data.score;
            })
        })
        load()
    }

    function update() {
        let newData = {
            id: document.getElementById('id').value,
            name: document.getElementById('name1').value,
            age: document.getElementById('age1').value,
            score: document.getElementById('score1').value
        }
        axios.put(API_URL + `/${newData.id}`, newData).then((res) => {
                document.getElementById('id').value = '';
                document.getElementById('name1').value = '';
                document.getElementById('age1').value = ''
                document.getElementById('score1').value = ''
                load()
            }
        )
    }

</script>
</body>
</html>